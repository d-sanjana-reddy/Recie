<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Interactive Recipe Finder</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f3f4f6;
            color: #1f2937;
        }
        /* Custom scrollbar for better aesthetics */
        ::-webkit-scrollbar {
            width: 8px;
        }
        ::-webkit-scrollbar-track {
            background: #e5e7eb;
            border-radius: 10px;
        }
        ::-webkit-scrollbar-thumb {
            background: #9ca3af;
            border-radius: 10px;
        }
        ::-webkit-scrollbar-thumb:hover {
            background: #6b7280;
        }
    </style>
</head>
<body class="p-4 sm:p-8 flex items-center justify-center min-h-screen">
    <div id="app-container" class="w-full max-w-4xl p-6 bg-white shadow-xl rounded-2xl flex flex-col items-center">

        <header class="text-center mb-6">
            <h1 class="text-4xl font-bold text-gray-800 mb-2">Recipe Finder</h1>
            <p class="text-lg text-gray-600 max-w-xl mx-auto">Enter ingredients you have, separated by commas, and discover delicious recipes to make. Minimize food waste and find your next meal!</p>
        </header>

        <!-- Input and Search Button -->
        <div class="w-full max-w-xl flex flex-col sm:flex-row gap-4 mb-6">
            <input
                id="ingredients-input"
                type="text"
                placeholder="e.g., chicken, pasta, tomatoes, cheese"
                class="flex-grow p-4 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 shadow-sm"
            >
            <button
                id="search-button"
                class="px-8 py-4 bg-blue-600 text-white font-semibold rounded-xl hover:bg-blue-700 transition-colors shadow-md transform hover:scale-105 active:scale-95 focus:outline-none focus:ring-2 focus:ring-blue-500"
            >
                Find Recipes
            </button>
        </div>

        <!-- Loading, Error, and Results Container -->
        <div id="status-message" class="text-center text-gray-500 my-4 text-sm font-medium hidden"></div>
        <div id="recipes-container" class="w-full grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6">
            <!-- Recipes will be injected here by JavaScript -->
        </div>

        <!-- Recipe Details Modal (Initially hidden) -->
        <div id="recipe-modal" class="fixed inset-0 bg-gray-900 bg-opacity-75 flex items-center justify-center p-4 z-50 hidden transition-opacity duration-300">
            <div class="bg-white rounded-2xl shadow-2xl p-6 max-w-3xl w-full max-h-[90vh] overflow-y-auto">
                <div class="flex justify-end">
                    <button id="close-modal" class="text-gray-400 hover:text-gray-600 transition-colors text-2xl font-bold">&times;</button>
                </div>
                <div id="modal-content" class="text-gray-800">
                    <!-- Modal content will be injected here -->
                </div>
            </div>
        </div>
    </div>

    <script>
        window.onload = function() {
            // --- API Configuration ---
            // IMPORTANT: Get your free API keys from https://developer.edamam.com/
            // and replace 'YOUR_APP_ID' and 'YOUR_APP_KEY' below with your actual keys.
            const APP_ID = '4777e989';
            const APP_KEY = '22ada94aa7d19d3358ab9a97993fcd32';
            const API_BASE_URL = 'https://api.edamam.com/api/recipes/v2';

            // --- DOM Elements ---
            const ingredientsInput = document.getElementById('ingredients-input');
            const searchButton = document.getElementById('search-button');
            const recipesContainer = document.getElementById('recipes-container');
            const statusMessage = document.getElementById('status-message');
            const recipeModal = document.getElementById('recipe-modal');
            const closeModalButton = document.getElementById('close-modal');
            const modalContent = document.getElementById('modal-content');

            // --- Event Listeners ---
            searchButton.addEventListener('click', () => {
                const ingredients = ingredientsInput.value.trim();
                if (ingredients) {
                    fetchRecipes(ingredients);
                } else {
                    displayStatus('Please enter at least one ingredient.', 'error');
                }
            });

            closeModalButton.addEventListener('click', () => {
                recipeModal.classList.add('hidden');
                recipeModal.classList.remove('opacity-100');
            });

            // Close modal when clicking outside of it
            recipeModal.addEventListener('click', (event) => {
                if (event.target === recipeModal) {
                    recipeModal.classList.add('hidden');
                    recipeModal.classList.remove('opacity-100');
                }
            });

            // --- Main Functions ---

            /**
             * Fetches recipes from the Edamam API based on ingredients.
             * @param {string} ingredients - A comma-separated string of ingredients.
             */
            async function fetchRecipes(ingredients) {
                recipesContainer.innerHTML = '';
                displayStatus('Finding recipes...', 'loading');

                try {
                    const url = `${API_BASE_URL}?type=public&q=${ingredients}&app_id=${APP_ID}&app_key=${APP_KEY}`;
                    const response = await fetch(url);
                    
                    if (!response.ok) {
                        throw new Error(`HTTP error! status: ${response.status}`);
                    }

                    const data = await response.json();
                    
                    if (data.hits.length === 0) {
                        displayStatus('No recipes found with these ingredients. Try different ones!', 'info');
                    } else {
                        displayRecipes(data.hits);
                        hideStatus();
                    }

                } catch (error) {
                    displayStatus(`Error: ${error.message}`, 'error');
                }
            }

            /**
             * Fetches and displays detailed information for a single recipe.
             * @param {object} recipe - The full recipe object from the search results.
             */
            function showRecipeDetails(recipe) {
                modalContent.innerHTML = ''; // Clear previous content
                recipeModal.classList.remove('hidden');
                recipeModal.classList.add('opacity-100');

                // Get recipe details from the passed object
                const title = recipe.label;
                const image = recipe.image;
                const ingredientList = recipe.ingredientLines.map(line => `<li>${line}</li>`).join('');
                const recipeUrl = recipe.url;
                
                const modalHtml = `
                    <h2 class="text-3xl font-bold mb-4 text-center">${title}</h2>
                    <img src="${image}" alt="${title}" class="w-full rounded-xl mb-6 shadow-md">
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                        <div>
                            <h3 class="text-2xl font-semibold mb-2 text-gray-700">Ingredients</h3>
                            <ul class="list-disc list-inside text-gray-600 space-y-1">
                                ${ingredientList}
                            </ul>
                        </div>
                        <div>
                            <h3 class="text-2xl font-semibold mb-2 text-gray-700">Instructions</h3>
                            <p class="text-gray-600 leading-relaxed">Detailed instructions are available on the recipe's website. Click the link below to view them.</p>
                            <a href="${recipeUrl}" target="_blank" class="inline-block mt-4 px-6 py-2 bg-blue-600 text-white font-semibold rounded-lg hover:bg-blue-700 transition-colors">
                                View Full Recipe
                            </a>
                        </div>
                    </div>
                `;
                modalContent.innerHTML = modalHtml;
            }

            // --- UI Helper Functions ---

            /**
             * Displays the list of recipes as cards.
             * @param {Array} hits - An array of recipe hit objects.
             */
            function displayRecipes(hits) {
                recipesContainer.innerHTML = '';
                hits.forEach(hit => {
                    const recipe = hit.recipe;
                    const card = document.createElement('div');
                    card.className = 'bg-white rounded-2xl shadow-lg hover:shadow-xl transition-all duration-300 transform hover:-translate-y-1 cursor-pointer';
                    card.innerHTML = `
                        <img src="${recipe.image}" alt="${recipe.label}" class="w-full h-48 object-cover rounded-t-2xl">
                        <div class="p-4">
                            <h3 class="text-lg font-semibold text-gray-800 mb-2">${recipe.label}</h3>
                            <p class="text-sm text-gray-500">Source: <span class="text-gray-700 font-medium">${recipe.source}</span></p>
                            <p class="text-sm text-gray-500">Cuisine: <span class="text-gray-700 font-medium">${recipe.cuisineType.join(', ')}</span></p>
                        </div>
                    `;
                    // Pass the entire recipe object to the details function
                    card.addEventListener('click', () => showRecipeDetails(recipe));
                    recipesContainer.appendChild(card);
                });
            }

            /**
             * Displays a status message to the user.
             * @param {string} message - The message to display.
             * @param {string} type - 'loading', 'error', or 'info'.
             */
            function displayStatus(message, type) {
                statusMessage.textContent = message;
                statusMessage.classList.remove('hidden');
                statusMessage.classList.remove('text-blue-500', 'text-red-500', 'text-gray-500');
                if (type === 'loading') {
                    statusMessage.classList.add('text-blue-500');
                } else if (type === 'error') {
                    statusMessage.classList.add('text-red-500');
                } else {
                    statusMessage.classList.add('text-gray-500');
                }
            }

            function hideStatus() {
                statusMessage.classList.add('hidden');
            }
        }
    </script>
</body>
</html>
